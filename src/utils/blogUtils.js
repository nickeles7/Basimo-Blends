// utils/blogUtils.js

// Blog post data - In a real app, this would come from a CMS or markdown files
const blogPostsData = [
  {
    slug: 'perfect-zaatar-roasted-chicken',
    frontmatter: {
      title: "Perfect Za'atar Roasted Chicken Recipe",
      date: "December 15, 2024",
      author: "Basimo Blends",
      category: "Recipes",
      tags: ["zaatar", "chicken", "dinner", "organic", "mediterranean"],
      featuredImage: "/images/hero-roasted-veggie-bowl.jpg",
      excerpt: "Transform your dinner with this aromatic za'atar roasted chicken that showcases the incredible flavor of our organic spice blend.",
      readTime: "8 min read",
      relatedProducts: ["zaatar-blend"]
    },
    content: `# Perfect Za'atar Roasted Chicken Recipe

This aromatic roasted chicken showcases the incredible flavor of our organic za'atar blend. The combination of herbs, sesame seeds, and sumac creates a crispy, flavorful crust that will make this your new favorite dinner recipe.

## Ingredients

- 1 whole chicken (3-4 lbs)
- 3 tbsp Basimo Blends Organic Za'atar
- 2 tbsp extra virgin olive oil
- 1 lemon (juiced and zested)
- 3 cloves garlic, minced
- Salt and black pepper to taste
- 1 onion, quartered
- Fresh herbs for garnish

## Instructions

1. **Preheat your oven** to 425°F (220°C).

2. **Prepare the chicken** by patting it dry with paper towels. This ensures crispy skin.

3. **Make the za'atar paste** by mixing our organic za'atar with olive oil, lemon juice, lemon zest, and minced garlic.

4. **Season the chicken** generously with salt and pepper, then rub the za'atar paste all over the skin and inside the cavity.

5. **Stuff the cavity** with quartered onion and any remaining lemon halves.

6. **Roast for 60-75 minutes** until the internal temperature reaches 165°F (74°C).

7. **Rest for 10 minutes** before carving.

## Chef's Tips

- For extra crispy skin, let the seasoned chicken sit uncovered in the refrigerator for 2-4 hours before roasting
- Save the pan drippings to make a delicious gravy
- Serve with roasted vegetables tossed in our za'atar blend

## The Magic of Our Za'atar

Our organic za'atar blend features hand-selected thyme, sesame seeds, sumac, and other premium ingredients that create layers of flavor - earthy, tangy, and aromatic all at once.

*Enjoy this recipe? Share it with friends and tag us @basimoblend on Instagram!*`
  },
  {
    slug: 'health-benefits-organic-thyme',
    frontmatter: {
      title: "The Amazing Health Benefits of Organic Thyme",
      date: "December 10, 2024",
      author: "Basimo Blends",
      category: "Health",
      tags: ["thyme", "health", "organic", "antioxidants", "wellness"],
      featuredImage: "/images/organic-dried-thyme.jpg",
      excerpt: "Discover why organic thyme is more than just a flavorful herb - it's a powerhouse of health benefits that have been treasured for centuries.",
      readTime: "5 min read",
      relatedProducts: ["zaatar-blend"]
    },
    content: `# The Amazing Health Benefits of Organic Thyme

Thyme isn't just a delicious herb that adds incredible flavor to your dishes - it's also packed with health benefits that have been recognized for thousands of years. As one of the key ingredients in our organic za'atar blend, thyme brings both taste and wellness to your table.

## Rich in Antioxidants

Organic thyme is loaded with antioxidants, including:
- **Vitamin C** - supports immune system function
- **Vitamin A** - promotes healthy vision and skin
- **Flavonoids** - help fight inflammation

## Natural Antimicrobial Properties

Studies have shown that thyme contains compounds like thymol and carvacrol that have natural antimicrobial properties, making it a traditional remedy for:
- Supporting respiratory health
- Promoting digestive wellness
- Natural preservation (which is why it's been used in cooking for centuries!)

## Why Choose Organic?

When you choose organic thyme like we use in our Basimo Blends za'atar:
- No synthetic pesticides or fertilizers
- Higher concentration of beneficial compounds
- Better for the environment
- Pure, clean flavor

## How to Incorporate More Thyme

- Sprinkle our za'atar blend on roasted vegetables
- Add to marinades for meat and fish
- Mix into olive oil for a healthy bread dip
- Season soups and stews

## The Basimo Blends Difference

Our organic thyme is carefully sourced and dried to preserve maximum flavor and nutritional value. Combined with our other premium organic ingredients, it creates a za'atar blend that's both delicious and nourishing.

*Ready to experience the benefits of organic thyme? Try our za'atar blend today!*`
  },
  {
    slug: 'perfect-labneh-flatbread-recipe',
    frontmatter: {
      title: "Mediterranean Labneh Flatbread with Za'atar",
      date: "December 5, 2024",
      author: "Basimo Blends",
      category: "Recipes",
      tags: ["labneh", "flatbread", "mediterranean", "zaatar", "appetizer"],
      featuredImage: "/images/hero-labneh-flatbread.jpg",
      excerpt: "Create an authentic Mediterranean appetizer with creamy labneh, fresh vegetables, and our signature organic za'atar blend.",
      readTime: "6 min read",
      relatedProducts: ["zaatar-blend"]
    },
    content: `# Mediterranean Labneh Flatbread with Za'atar

This beautiful flatbread combines creamy labneh cheese with fresh vegetables and our signature organic za'atar for an authentic Mediterranean experience that's perfect as an appetizer or light meal.

## Ingredients

### For the Flatbread:
- 4 pieces naan or pita bread
- 2 tbsp olive oil
- 1 tbsp Basimo Blends Organic Za'atar

### For the Topping:
- 1 cup labneh (or thick Greek yogurt)
- 1 cucumber, diced
- 1 cup cherry tomatoes, halved
- 1/4 red onion, thinly sliced
- 2 tbsp Basimo Blends Organic Za'atar
- Extra virgin olive oil for drizzling
- Fresh mint leaves
- Sea salt to taste

## Instructions

1. **Prepare the flatbread** by brushing with olive oil and sprinkling with za'atar. Toast in a 400°F oven for 5-7 minutes until crispy.

2. **Spread the labneh** generously over each warm flatbread.

3. **Add the vegetables** - arrange cucumber, tomatoes, and red onion over the labneh.

4. **Finish with za'atar** - sprinkle generously over the top.

5. **Drizzle with olive oil** and garnish with fresh mint leaves.

6. **Serve immediately** while the flatbread is still warm.

## Variations

- **Roasted Vegetable**: Add roasted bell peppers and eggplant
- **Protein Boost**: Top with grilled chicken or chickpeas
- **Seasonal**: Use seasonal vegetables like roasted butternut squash in fall

## About Labneh

Labneh is a Middle Eastern strained yogurt cheese that's incredibly creamy and tangy. If you can't find it, you can make your own by straining Greek yogurt overnight through cheesecloth.

## The Perfect Za'atar

Our organic za'atar blend adds the perfect finishing touch with its blend of thyme, sesame seeds, sumac, and other premium ingredients. The tangy, earthy flavor complements the creamy labneh beautifully.

*This recipe serves 4 as an appetizer or 2 as a light meal. Perfect for entertaining!*`
  }
];

// Utility functions
export const getAllBlogPosts = async () => {
  try {
    // Sort posts by date (newest first)
    const sortedPosts = blogPostsData
      .map(post => ({
        slug: post.slug,
        ...post.frontmatter,
        content: post.content
      }))
      .sort((a, b) => new Date(b.date) - new Date(a.date));
    
    return sortedPosts;
  } catch (error) {
    console.error('Error loading blog posts:', error);
    return [];
  }
};

export const getBlogPostBySlug = async (slug) => {
  try {
    const post = blogPostsData.find(post => post.slug === slug);
    if (!post) return null;
    
    return {
      slug: post.slug,
      ...post.frontmatter,
      content: post.content
    };
  } catch (error) {
    console.error('Error loading blog post:', error);
    return null;
  }
};

export const getPostsByCategory = (posts, category) => {
  if (category === 'all') return posts;
  return posts.filter(post => post.category === category);
};

export const getPostsByTag = (posts, tag) => {
  return posts.filter(post => post.tags.includes(tag));
};

export const getFeaturedPosts = (posts, count = 3) => {
  return posts.slice(0, count);
};

export const searchPosts = (posts, searchTerm) => {
  const term = searchTerm.toLowerCase();
  return posts.filter(post =>
    post.title.toLowerCase().includes(term) ||
    post.excerpt.toLowerCase().includes(term) ||
    post.content.toLowerCase().includes(term) ||
    post.tags.some(tag => tag.toLowerCase().includes(term))
  );
};

export const getRelatedPosts = (posts, currentPost, count = 3) => {
  return posts
    .filter(post => post.slug !== currentPost.slug)
    .filter(post => 
      post.category === currentPost.category || 
      post.tags.some(tag => currentPost.tags.includes(tag))
    )
    .slice(0, count);
};

// Helper function to format dates
export const formatDate = (dateString) => {
  const options = { year: 'numeric', month: 'long', day: 'numeric' };
  return new Date(dateString).toLocaleDateString(undefined, options);
};

// Helper function to calculate reading time
export const calculateReadingTime = (content) => {
  const wordsPerMinute = 200;
  const words = content.split(' ').length;
  const minutes = Math.ceil(words / wordsPerMinute);
  return `${minutes} min read`;
};
